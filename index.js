!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}("undefined"!=typeof window?window:this,function(){return function(n){var r={};function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}return o.m=n,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,n){"use strict";n.r(t);var c=function(i,u,s,a){return new(s||(s=Promise))(function(e,t){function n(e){try{o(a.next(e))}catch(e){t(e)}}function r(e){try{o(a.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,r)}o((a=a.apply(i,u||[])).next())})},f=function(n,r){var o,i,u,e,s={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(u=2&t[0]?i.return:t[0]?i.throw||((u=i.return)&&u.call(i),0):i.next)&&!(u=u.call(i,t[1])).done)return u;switch(i=0,u&&(t=[2&t[0],u.value]),t[0]){case 0:case 1:u=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(u=0<(u=s.trys).length&&u[u.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){s.label=t[1];break}if(6===t[0]&&s.label<u[1]){s.label=u[1],u=t;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(t);break}u[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},r=function(){function e(e,t,n,r){(this.core=e).AssertExtend(),this.SortType=n,this.sizes=new Map([]);var o=t.key,i=t.width;for(var u in t.sizes)if(t.sizes.hasOwnProperty(u)){var s=t.sizes[u];if(!e.IsString(u))throw Error("size key must be non-empty string");if(!u.IsAlphanumeric())throw Error("size key must be alphanumeric");if(!e.IsNumber(s,!1))throw Error("size value must be number");this.sizes.set(u,s)}if(0===this.sizes.size)throw Error("Sizes cannot be empty!");if(!this.sizes.HasKey(o))throw Error("No default key in sizes!");if(r)this.modifier=function(e){return e};else{var a=window.innerWidth,c=this.sizes.get(o),f=this.sizes.MapValue(function(e){return e/c*i}),l=f.Where(function(e,t){return a<=t}),p=0===l.size?f.SortByValue(this.SortType.Descending).Keys().Take():l.SortByValue(this.SortType.Ascending).Keys().Take();this.modifier=function(e){var t=e.split("."),n=t.Last().toLowerCase();return"jpg"===n||"png"===n||"jpeg"===n?t.Omit(1).join(".")+"_"+p+"."+n:e}}}return e.prototype.rr=function(e){(null!=document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?e():document.addEventListener("DOMContentLoaded",function(){e()})},e.prototype.ExtendPrimitives=function(){var e=this;String.prototype.Rimage=function(){return e.modifier(this)}},e.prototype.RegisterImages=function(e,o){var t=this;void 0===o&&(o=function(){});var n=this.core.FlattenObject(e).MapValue(function(e){return t.modifier(e)}),i=0,u=0,s=n.size,a=this;return n.Values().Each(function(r){return new Promise(function(n){return c(t,void 0,void 0,function(){var t;return f(this,function(e){switch(e.label){case 0:return[4,a.ri(r)];case 1:return e.sent()?i++:u++,t=this.ce(s,i,u),o(t),n(),[2]}})})})}),n.AsObject()},e.prototype.ce=function(e,t,n){var r=t+n,o=r+"/"+e,i=function(e){return e.toFixed(2)+"%"},u=this.tp(r,e,5),s=r/e;return{failed:n,succeeded:t,total:e,progress:{linear:{percentage:i(s),over:o,value:s},tangential:{percentage:i(u),over:o,value:u}}}},e.prototype.tp=function(e,t,n){return Math.tan(e*Math.atan(n)/t)/n},e.prototype.ri=function(t){var n=this,r=new Image;return new Promise(function(e){r.onload=function(){e(!0)},r.onerror=function(){e(!1)},r.src=t,r.style.display="none",r.style.position="absolute",n.rr(function(){document.getElementsByTagName("html")[0].append(r)})})},e}();n.d(t,"Rimager",function(){return r})}])});